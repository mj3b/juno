<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} | JUNO</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="{{ url_for('static', filename='phase2/css/dashboard.css') }}" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-brain"></i>
                    <span class="logo-text">JUNO</span>
                    <span class="phase-badge">Phase 2</span>
                </div>
            </div>
            
            <div class="nav-menu">
                <div class="nav-section">
                    <h3>Agentic AI</h3>
                    <a href="#dashboard" class="nav-item active" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="#risk-forecast" class="nav-item" data-section="risk-forecast">
                        <i class="fas fa-chart-line"></i>
                        <span>Risk Forecast</span>
                    </a>
                    <a href="#triage" class="nav-item" data-section="triage">
                        <i class="fas fa-tasks"></i>
                        <span>Smart Triage</span>
                    </a>
                    <a href="#governance" class="nav-item" data-section="governance">
                        <i class="fas fa-shield-alt"></i>
                        <span>Governance</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <h3>Analytics</h3>
                    <a href="#velocity" class="nav-item" data-section="velocity">
                        <i class="fas fa-rocket"></i>
                        <span>Velocity Analysis</span>
                    </a>
                    <a href="#memory" class="nav-item" data-section="memory">
                        <i class="fas fa-database"></i>
                        <span>AI Memory</span>
                    </a>
                    <a href="#reasoning" class="nav-item" data-section="reasoning">
                        <i class="fas fa-lightbulb"></i>
                        <span>AI Reasoning</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <h3>Legacy</h3>
                    <a href="#phase1" class="nav-item" data-section="phase1">
                        <i class="fas fa-chart-bar"></i>
                        <span>Phase 1 Analytics</span>
                    </a>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name">Demo User</span>
                        <span class="user-role">Team Lead</span>
                    </div>
                </div>
            </div>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h1 class="page-title">Agentic AI Dashboard</h1>
                    <p class="page-subtitle">Proactive workflow management with transparent AI reasoning</p>
                </div>
                <div class="header-right">
                    <div class="ai-status">
                        <div class="status-indicator active"></div>
                        <span>AI Agent Active</span>
                    </div>
                    <div class="notifications">
                        <i class="fas fa-bell"></i>
                        <span class="notification-count">3</span>
                    </div>
                </div>
            </header>
            
            <!-- Dashboard Content -->
            <div class="content-area" id="dashboard-content">
                <!-- AI Status Cards -->
                <div class="status-grid">
                    <div class="status-card ai-card">
                        <div class="card-header">
                            <h3>AI Agent Status</h3>
                            <div class="status-indicator active"></div>
                        </div>
                        <div class="card-content">
                            <div class="metric">
                                <span class="metric-value">94%</span>
                                <span class="metric-label">Confidence Score</span>
                            </div>
                            <div class="metric">
                                <span class="metric-value">127</span>
                                <span class="metric-label">Actions Today</span>
                            </div>
                            <div class="metric">
                                <span class="metric-value">89%</span>
                                <span class="metric-label">Approval Rate</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card risk-card">
                        <div class="card-header">
                            <h3>Sprint Risk Forecast</h3>
                            <span class="risk-level medium">Medium Risk</span>
                        </div>
                        <div class="card-content">
                            <div class="risk-chart">
                                <div class="risk-bar">
                                    <div class="risk-fill" style="width: 65%"></div>
                                </div>
                                <span class="risk-percentage">65% Completion Probability</span>
                            </div>
                            <div class="risk-factors">
                                <div class="factor">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <span>Velocity trending down</span>
                                </div>
                                <div class="factor">
                                    <i class="fas fa-clock"></i>
                                    <span>3 blocked tickets</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card governance-card">
                        <div class="card-header">
                            <h3>Governance Queue</h3>
                            <span class="pending-count">5 Pending</span>
                        </div>
                        <div class="card-content">
                            <div class="approval-queue">
                                <div class="queue-item high-priority">
                                    <div class="item-info">
                                        <span class="item-title">Ticket Reassignment</span>
                                        <span class="item-time">2 hours ago</span>
                                    </div>
                                    <button class="approve-btn">Review</button>
                                </div>
                                <div class="queue-item">
                                    <div class="item-info">
                                        <span class="item-title">Sprint Scope Change</span>
                                        <span class="item-time">4 hours ago</span>
                                    </div>
                                    <button class="approve-btn">Review</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card triage-card">
                        <div class="card-header">
                            <h3>Smart Triage</h3>
                            <span class="triage-count">12 Analyzed</span>
                        </div>
                        <div class="card-content">
                            <div class="triage-summary">
                                <div class="triage-action">
                                    <span class="action-count">7</span>
                                    <span class="action-label">Reassign</span>
                                </div>
                                <div class="triage-action">
                                    <span class="action-count">3</span>
                                    <span class="action-label">Escalate</span>
                                </div>
                                <div class="triage-action">
                                    <span class="action-count">2</span>
                                    <span class="action-label">Defer</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recent AI Actions -->
                <div class="section-card">
                    <div class="section-header">
                        <h2>Recent AI Actions</h2>
                        <div class="section-controls">
                            <button class="filter-btn active">All</button>
                            <button class="filter-btn">Approved</button>
                            <button class="filter-btn">Pending</button>
                        </div>
                    </div>
                    <div class="actions-list">
                        <div class="action-item approved">
                            <div class="action-icon">
                                <i class="fas fa-user-check"></i>
                            </div>
                            <div class="action-details">
                                <h4>Ticket Reassignment</h4>
                                <p>Reassigned JIRA-1234 from John to Sarah based on workload analysis</p>
                                <div class="action-meta">
                                    <span class="confidence">Confidence: 92%</span>
                                    <span class="timestamp">2 hours ago</span>
                                    <span class="approver">Approved by: Team Lead</span>
                                </div>
                            </div>
                            <div class="action-status approved">
                                <i class="fas fa-check"></i>
                                <span>Approved</span>
                            </div>
                            <button class="reasoning-btn" onclick="showReasoning('action1')">
                                <i class="fas fa-lightbulb"></i>
                                Why?
                            </button>
                        </div>
                        
                        <div class="action-item pending">
                            <div class="action-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="action-details">
                                <h4>Sprint Scope Reduction</h4>
                                <p>Recommend removing 8 story points to ensure sprint success</p>
                                <div class="action-meta">
                                    <span class="confidence">Confidence: 87%</span>
                                    <span class="timestamp">4 hours ago</span>
                                    <span class="deadline">Deadline: 20 hours</span>
                                </div>
                            </div>
                            <div class="action-status pending">
                                <i class="fas fa-clock"></i>
                                <span>Pending</span>
                            </div>
                            <button class="reasoning-btn" onclick="showReasoning('action2')">
                                <i class="fas fa-lightbulb"></i>
                                Why?
                            </button>
                        </div>
                        
                        <div class="action-item approved">
                            <div class="action-icon">
                                <i class="fas fa-arrow-up"></i>
                            </div>
                            <div class="action-details">
                                <h4>Priority Escalation</h4>
                                <p>Escalated JIRA-5678 to Engineering Manager due to dependency blocking</p>
                                <div class="action-meta">
                                    <span class="confidence">Confidence: 95%</span>
                                    <span class="timestamp">6 hours ago</span>
                                    <span class="approver">Auto-approved</span>
                                </div>
                            </div>
                            <div class="action-status approved">
                                <i class="fas fa-check"></i>
                                <span>Approved</span>
                            </div>
                            <button class="reasoning-btn" onclick="showReasoning('action3')">
                                <i class="fas fa-lightbulb"></i>
                                Why?
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- AI Learning Insights -->
                <div class="section-card">
                    <div class="section-header">
                        <h2>AI Learning Insights</h2>
                        <span class="insight-badge">New patterns detected</span>
                    </div>
                    <div class="insights-grid">
                        <div class="insight-card">
                            <div class="insight-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="insight-content">
                                <h4>Team Pattern Recognition</h4>
                                <p>Detected that Team Alpha performs 23% better on backend tasks vs frontend tasks</p>
                                <div class="insight-actions">
                                    <button class="apply-btn">Apply to Future Assignments</button>
                                    <button class="learn-more-btn">Learn More</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="insight-card">
                            <div class="insight-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="insight-content">
                                <h4>Velocity Optimization</h4>
                                <p>Sprint success rate increases by 34% when story points are distributed more evenly</p>
                                <div class="insight-actions">
                                    <button class="apply-btn">Optimize Current Sprint</button>
                                    <button class="learn-more-btn">View Analysis</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Reasoning Modal -->
    <div id="reasoning-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>AI Reasoning Explanation</h3>
                <button class="close-btn" onclick="closeReasoning()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="reasoning-content">
                    <div class="confidence-score">
                        <span class="score-label">Confidence Score</span>
                        <div class="score-bar">
                            <div class="score-fill" id="confidence-fill"></div>
                        </div>
                        <span class="score-value" id="confidence-value">92%</span>
                    </div>
                    
                    <div class="reasoning-factors">
                        <h4>Decision Factors</h4>
                        <div class="factor-list" id="factor-list">
                            <!-- Factors will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="reasoning-explanation">
                        <h4>Detailed Explanation</h4>
                        <p id="explanation-text">
                            <!-- Explanation will be populated by JavaScript -->
                        </p>
                    </div>
                    
                    <div class="data-sources">
                        <h4>Data Sources</h4>
                        <div class="source-list" id="source-list">
                            <!-- Sources will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='phase2/js/dashboard.js') }}"></script>
</body>
</html>

